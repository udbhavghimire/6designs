RewriteEngine On
Options +FollowSymLinks

RewriteBase /

# Skip rewrite for existing toronto directory
RewriteCond %{REQUEST_URI} !^/toronto-idx-website-for-realtors
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z-]+)-idx-website-for-realtors/?$ idx-website-for-realtors/index.php?city=$1 [NC,L,QSA]

# Prevent direct access to template files
<FilesMatch "(city-template|cities)\.php$">
    Order Deny,Allow
    Deny from all
</FilesMatch>